# 角色权限说明

目前系统角色列表

| 角色名称                     | 角色代码            |
| ---------------------------- | ------------------- |
| 超级管理员                   | super               |
| 管理员                       | admin               |
| 技术中心领导                 | center_leader       |
| 部门领导                     | dept_leader         |
| 超级计划审批员               | super_test_approver |
| 测试计划负责人               | testHeader          |
| 测试设备管理人员             | test_admin          |
| 技术人员（技术中心除应用所） | technicist          |
| 一般人员                     | normal_person       |

> 一个用户可以有多个角色，系统中的某些特殊角色只是去控制某种特殊功能



## 页面访问权限

### 菜单模块访问权限

按系统菜单大模块，大范围整体的对角色可访问划分

| 模块名称     | 可访问角色                               |
| ------------ | ---------------------------------------- |
| 首页         | 全部角色（除特殊角色）                   |
| 数据管理     | 未开发？                                 |
| 算法管理     | 部门领导、一般人员                       |
| 故障信息管理 | 部门领导、一般人员                       |
| 产品画像     | 部门领导、一般人员                       |
| 产品型谱管理 | 部门领导、一般人员                       |
| 产品参数     | 部门领导、一般人员                       |
| 项目管理     | 部门领导、一般人员                       |
| 测试计划管理 | 部门领导、一般人员、技术人员（除应用所） |
| 载荷谱管理   | 部门领导、一般人员                       |
| 基础管理     | 未开发？                                 |
| 报告管理     | 部门领导、一般人员                       |
| 系统管理     | 部门领导                                 |

> 超级管理员、管理员可以访问所以模块页面
>
> 此处角色可以访问菜单中的模块，但具模块下有审批，管理的页面不是所有角色都可以访问；



### 特殊角色访问权限职责

| 角色名称       | 角色职能                                                     |
| -------------- | ------------------------------------------------------------ |
| 技术中心领导   | 测试计划 - 计划详情 - 技术中心领导审批页面                   |
| 超级计划审批员 | 测试计划 - 计划详情 - （申请部门审批、执行部门审批、技术中心领导审批） |
| 测试计划负责人 | 测试计划下：<br /> - 计划详情 - （申请部门审批、执行部门审批）<br /> - 申诉列表 - 申诉修改<br /> - 测试管理 |
| 测试设备负责人 | 测试计划 - 测试管理 - 测试设备管理                           |



## 操作权限

To be continue





## 测试计划权限说明

测试计划模块中梳理权限划分说明文档

测试计划中涉及角色如下： 

1. 测试计划负责人、 2. 部门领导、 3. 技术中心领导、 4. 超级计划审批员、 5. 测试管理员

> 文档中编写判断条件不仅限于用户权限， 还包含了相应的状态判断，是完整的按钮判断条件



### 计划审批

测试计划审批分三个阶段： 1. 申请部门审批 、2.  执行部门审批、 3. 技术中心领导审批

![image-20230711145557590](source/image-20230711145557590.png)

| 权限按钮         | 判断条件                                                     |
| ---------------- | ------------------------------------------------------------ |
| 申请部门审批     | ((applyDepartment == userDepartment && 测试计划负责人 ？ 部门领导) \|\| 超级计划审批员) && testState == '待审批' |
| 执行部门审批     | ((executeDepartment == userDepartment  && 测试计划负责人 ？ 部门领导） \|\| 超级计划审批员) && testState == '待审批' |
| 技术中心领导审批 | (技术中心领导 \|\| 超级计划审批员) && testState == '待审批'  |

> 超级计划审批员（角色）可以对所有阶段进行审批，为应急处理方案



### 一般按钮权限

**计划列表页面 || 我的计划页面**

| 权限按钮 | 判断条件                                              |
| -------- | ----------------------------------------------------- |
| 新增计划 | 测试计划负责人                                        |
| 计划详情 | 所有用户                                              |
| 分配计划 | testHeaderId == userID && testState == [待分配、实施] |
| 计划申诉 | testHeaderId == userID && testState == [实施、延期]   |
| 删除计划 | 测试计划负责人 \|\| 部门领导                          |
| 完成任务 | state == 进行中 && testManagerList.find(user)         |



**申诉列表页面**

| 权限按钮 | 判断条件                                         |
| -------- | ------------------------------------------------ |
| 通过申诉 | （部门领导 \|\| 测试计划负责人） && allowed == 0 |
| 拒绝申诉 | （部门领导 \|\| 测试计划负责人） && allowed == 0 |
| 修改计划 | createUser == userID && allowed == 1             |



### 测试管理

测试管理模块由**测试管理员**（角色）统一管理

